define(["exports","./Matrix2-b06ef836","./RuntimeError-ffe03243","./when-229515d6","./ComponentDatatype-dc3af6a4"],(function(t,a,i,e,n){"use strict";function s(t,a,i,e,n,s,r){var h=function(t,a){return t*a*(4+t*(4-3*a))/16}(t,i);return(1-h)*t*a*(e+h*n*(r+h*s*(2*r*r-1)))}var r=new a.Cartesian3,h=new a.Cartesian3;function d(t,e,d,o){var c=a.Cartesian3.normalize(o.cartographicToCartesian(e,h),r),u=a.Cartesian3.normalize(o.cartographicToCartesian(d,h),h);i.Check.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(a.Cartesian3.angleBetween(c,u))-Math.PI),.0125),function(t,a,i,e,r,h,d){var o,c,u,M,l,g=(a-i)/a,_=h-e,f=Math.atan((1-g)*Math.tan(r)),p=Math.atan((1-g)*Math.tan(d)),v=Math.cos(f),m=Math.sin(f),C=Math.cos(p),H=Math.sin(p),O=v*C,q=v*H,S=m*H,b=m*C,w=_,U=n.CesiumMath.TWO_PI,k=Math.cos(w),A=Math.sin(w);do{k=Math.cos(w),A=Math.sin(w);var R,y=q-b*k;u=Math.sqrt(C*C*A*A+y*y),c=S+O*k,o=Math.atan2(u,c),0===u?(R=0,M=1):M=1-(R=O*A/u)*R,U=w,l=c-2*S/M,isFinite(l)||(l=0),w=_+s(g,R,M,o,u,c,l)}while(Math.abs(w-U)>n.CesiumMath.EPSILON12);var E=M*(a*a-i*i)/(i*i),P=E*(256+E*(E*(74-47*E)-128))/1024,x=l*l,D=i*(1+E*(4096+E*(E*(320-175*E)-768))/16384)*(o-P*u*(l+P*(c*(2*x-1)-P*l*(4*u*u-3)*(4*x-3)/6)/4)),T=Math.atan2(C*A,q-b*k),I=Math.atan2(v*A,q*k-b);t._distance=D,t._startHeading=T,t._endHeading=I,t._uSquared=E}(t,o.maximumRadius,o.minimumRadius,e.longitude,e.latitude,d.longitude,d.latitude),t._start=a.Cartographic.clone(e,t._start),t._end=a.Cartographic.clone(d,t._end),t._start.height=0,t._end.height=0,function(t){var a=t._uSquared,i=t._ellipsoid.maximumRadius,e=t._ellipsoid.minimumRadius,n=(i-e)/i,s=Math.cos(t._startHeading),r=Math.sin(t._startHeading),h=(1-n)*Math.tan(t._start.latitude),d=1/Math.sqrt(1+h*h),o=d*h,c=Math.atan2(h,s),u=d*r,M=u*u,l=1-M,g=Math.sqrt(l),_=a/4,f=_*_,p=f*_,v=f*f,m=1+_-3*f/4+5*p/4-175*v/64,C=1-_+15*f/8-35*p/8,H=1-3*_+35*f/4,O=1-5*_,q=m*c-C*Math.sin(2*c)*_/2-H*Math.sin(4*c)*f/16-O*Math.sin(6*c)*p/48-5*Math.sin(8*c)*v/512,S=t._constants;S.a=i,S.b=e,S.f=n,S.cosineHeading=s,S.sineHeading=r,S.tanU=h,S.cosineU=d,S.sineU=o,S.sigma=c,S.sineAlpha=u,S.sineSquaredAlpha=M,S.cosineSquaredAlpha=l,S.cosineAlpha=g,S.u2Over4=_,S.u4Over16=f,S.u6Over64=p,S.u8Over256=v,S.a0=m,S.a1=C,S.a2=H,S.a3=O,S.distanceRatio=q}(t)}function o(t,i,n){var s=e.defaultValue(n,a.Ellipsoid.WGS84);this._ellipsoid=s,this._start=new a.Cartographic,this._end=new a.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,e.defined(t)&&e.defined(i)&&d(this,t,i,s)}Object.defineProperties(o.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return i.Check.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return i.Check.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return i.Check.defined("distance",this._distance),this._endHeading}}}),o.prototype.setEndPoints=function(t,a){i.Check.defined("start",t),i.Check.defined("end",a),d(this,t,a,this._ellipsoid)},o.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},o.prototype.interpolateUsingSurfaceDistance=function(t,n){i.Check.defined("distance",this._distance);var r=this._constants,h=r.distanceRatio+t/r.b,d=Math.cos(2*h),o=Math.cos(4*h),c=Math.cos(6*h),u=Math.sin(2*h),M=Math.sin(4*h),l=Math.sin(6*h),g=Math.sin(8*h),_=h*h,f=h*_,p=r.u8Over256,v=r.u2Over4,m=r.u6Over64,C=r.u4Over16,H=2*f*p*d/3+h*(1-v+7*C/4-15*m/4+579*p/64-(C-15*m/4+187*p/16)*d-(5*m/4-115*p/16)*o-29*p*c/16)+(v/2-C+71*m/32-85*p/16)*u+(5*C/16-5*m/4+383*p/96)*M-_*((m-11*p/2)*u+5*p*M/2)+(29*m/96-29*p/16)*l+539*p*g/1536,O=Math.asin(Math.sin(H)*r.cosineAlpha),q=Math.atan(r.a/r.b*Math.tan(O));H-=r.sigma;var S=Math.cos(2*r.sigma+H),b=Math.sin(H),w=Math.cos(H),U=r.cosineU*w,k=r.sineU*b,A=Math.atan2(b*r.sineHeading,U-k*r.cosineHeading)-s(r.f,r.sineAlpha,r.cosineSquaredAlpha,H,b,w,S);return e.defined(n)?(n.longitude=this._start.longitude+A,n.latitude=q,n.height=0,n):new a.Cartographic(this._start.longitude+A,q,0)},t.EllipsoidGeodesic=o}));
//# sourceMappingURL=EllipsoidGeodesic-c1f5c63d.js.map
