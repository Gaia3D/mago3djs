define(["exports","./Transforms-e254a706","./Matrix2-b06ef836","./RuntimeError-ffe03243","./ComponentDatatype-dc3af6a4","./when-229515d6","./GeometryAttribute-b662d87a","./GeometryAttributes-b253752a","./Plane-5d90414b","./VertexFormat-64c5c4fb"],(function(e,t,r,a,i,n,o,s,f,u){"use strict";function d(e){this.planes=n.defaultValue(e,[])}var h=[new r.Cartesian3,new r.Cartesian3,new r.Cartesian3];r.Cartesian3.clone(r.Cartesian3.UNIT_X,h[0]),r.Cartesian3.clone(r.Cartesian3.UNIT_Y,h[1]),r.Cartesian3.clone(r.Cartesian3.UNIT_Z,h[2]);var l=new r.Cartesian3,p=new r.Cartesian3,c=new f.Plane(new r.Cartesian3(1,0,0),0);function m(e){e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=n.defaultValue(e.near,1),this._near=this.near,this.far=n.defaultValue(e.far,5e8),this._far=this.far,this._cullingVolume=new d,this._orthographicMatrix=new r.Matrix4}function C(e){if(!(n.defined(e.right)&&n.defined(e.left)&&n.defined(e.top)&&n.defined(e.bottom)&&n.defined(e.near)&&n.defined(e.far)))throw new a.DeveloperError("right, left, top, bottom, near, or far parameters are not set.");if(e.top!==e._top||e.bottom!==e._bottom||e.left!==e._left||e.right!==e._right||e.near!==e._near||e.far!==e._far){if(e.left>e.right)throw new a.DeveloperError("right must be greater than left.");if(e.bottom>e.top)throw new a.DeveloperError("top must be greater than bottom.");if(e.near<=0||e.near>e.far)throw new a.DeveloperError("near must be greater than zero and less than far.");e._left=e.left,e._right=e.right,e._top=e.top,e._bottom=e.bottom,e._near=e.near,e._far=e.far,e._orthographicMatrix=r.Matrix4.computeOrthographicOffCenter(e.left,e.right,e.bottom,e.top,e.near,e.far,e._orthographicMatrix)}}d.fromBoundingSphere=function(e,t){if(!n.defined(e))throw new a.DeveloperError("boundingSphere is required.");n.defined(t)||(t=new d);var i=h.length,o=t.planes;o.length=2*i;for(var s=e.center,f=e.radius,u=0,c=0;c<i;++c){var m=h[c],C=o[u],w=o[u+1];n.defined(C)||(C=o[u]=new r.Cartesian4),n.defined(w)||(w=o[u+1]=new r.Cartesian4),r.Cartesian3.multiplyByScalar(m,-f,l),r.Cartesian3.add(s,l,l),C.x=m.x,C.y=m.y,C.z=m.z,C.w=-r.Cartesian3.dot(m,l),r.Cartesian3.multiplyByScalar(m,f,l),r.Cartesian3.add(s,l,l),w.x=-m.x,w.y=-m.y,w.z=-m.z,w.w=-r.Cartesian3.dot(r.Cartesian3.negate(m,p),l),u+=2}return t},d.prototype.computeVisibility=function(e){if(!n.defined(e))throw new a.DeveloperError("boundingVolume is required.");for(var r=this.planes,i=!1,o=0,s=r.length;o<s;++o){var u=e.intersectPlane(f.Plane.fromCartesian4(r[o],c));if(u===t.Intersect.OUTSIDE)return t.Intersect.OUTSIDE;u===t.Intersect.INTERSECTING&&(i=!0)}return i?t.Intersect.INTERSECTING:t.Intersect.INSIDE},d.prototype.computeVisibilityWithPlaneMask=function(e,r){if(!n.defined(e))throw new a.DeveloperError("boundingVolume is required.");if(!n.defined(r))throw new a.DeveloperError("parentPlaneMask is required.");if(r===d.MASK_OUTSIDE||r===d.MASK_INSIDE)return r;for(var i=d.MASK_INSIDE,o=this.planes,s=0,u=o.length;s<u;++s){var h=s<31?1<<s:0;if(!(s<31&&0==(r&h))){var l=e.intersectPlane(f.Plane.fromCartesian4(o[s],c));if(l===t.Intersect.OUTSIDE)return d.MASK_OUTSIDE;l===t.Intersect.INTERSECTING&&(i|=h)}}return i},d.MASK_OUTSIDE=4294967295,d.MASK_INSIDE=0,d.MASK_INDETERMINATE=2147483647,Object.defineProperties(m.prototype,{projectionMatrix:{get:function(){return C(this),this._orthographicMatrix}}});var w=new r.Cartesian3,v=new r.Cartesian3,_=new r.Cartesian3,y=new r.Cartesian3;function g(e){e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT),this._offCenterFrustum=new m,this.width=e.width,this._width=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=n.defaultValue(e.near,1),this._near=this.near,this.far=n.defaultValue(e.far,5e8),this._far=this.far}function x(e){if(!(n.defined(e.width)&&n.defined(e.aspectRatio)&&n.defined(e.near)&&n.defined(e.far)))throw new a.DeveloperError("width, aspectRatio, near, or far parameters are not set.");var t=e._offCenterFrustum;if(e.width!==e._width||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far){if(e.aspectRatio<0)throw new a.DeveloperError("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new a.DeveloperError("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._width=e.width,e._near=e.near,e._far=e.far;var r=1/e.aspectRatio;t.right=.5*e.width,t.left=-t.right,t.top=r*t.right,t.bottom=-t.top,t.near=e.near,t.far=e.far}}function b(e){e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=n.defaultValue(e.near,1),this._near=this.near,this.far=n.defaultValue(e.far,5e8),this._far=this.far,this._cullingVolume=new d,this._perspectiveMatrix=new r.Matrix4,this._infinitePerspective=new r.Matrix4}function E(e){if(!(n.defined(e.right)&&n.defined(e.left)&&n.defined(e.top)&&n.defined(e.bottom)&&n.defined(e.near)&&n.defined(e.far)))throw new a.DeveloperError("right, left, top, bottom, near, or far parameters are not set.");var t=e.top,i=e.bottom,o=e.right,s=e.left,f=e.near,u=e.far;if(t!==e._top||i!==e._bottom||s!==e._left||o!==e._right||f!==e._near||u!==e._far){if(e.near<=0||e.near>e.far)throw new a.DeveloperError("near must be greater than zero and less than far.");e._left=s,e._right=o,e._top=t,e._bottom=i,e._near=f,e._far=u,e._perspectiveMatrix=r.Matrix4.computePerspectiveOffCenter(s,o,i,t,f,u,e._perspectiveMatrix),e._infinitePerspective=r.Matrix4.computeInfinitePerspectiveOffCenter(s,o,i,t,f,e._infinitePerspective)}}m.prototype.computeCullingVolume=function(e,t,i){if(!n.defined(e))throw new a.DeveloperError("position is required.");if(!n.defined(t))throw new a.DeveloperError("direction is required.");if(!n.defined(i))throw new a.DeveloperError("up is required.");var o=this._cullingVolume.planes,s=this.top,f=this.bottom,u=this.right,d=this.left,h=this.near,l=this.far,p=r.Cartesian3.cross(t,i,w);r.Cartesian3.normalize(p,p);var c=v;r.Cartesian3.multiplyByScalar(t,h,c),r.Cartesian3.add(e,c,c);var m=_;r.Cartesian3.multiplyByScalar(p,d,m),r.Cartesian3.add(c,m,m);var C=o[0];return n.defined(C)||(C=o[0]=new r.Cartesian4),C.x=p.x,C.y=p.y,C.z=p.z,C.w=-r.Cartesian3.dot(p,m),r.Cartesian3.multiplyByScalar(p,u,m),r.Cartesian3.add(c,m,m),C=o[1],n.defined(C)||(C=o[1]=new r.Cartesian4),C.x=-p.x,C.y=-p.y,C.z=-p.z,C.w=-r.Cartesian3.dot(r.Cartesian3.negate(p,y),m),r.Cartesian3.multiplyByScalar(i,f,m),r.Cartesian3.add(c,m,m),C=o[2],n.defined(C)||(C=o[2]=new r.Cartesian4),C.x=i.x,C.y=i.y,C.z=i.z,C.w=-r.Cartesian3.dot(i,m),r.Cartesian3.multiplyByScalar(i,s,m),r.Cartesian3.add(c,m,m),C=o[3],n.defined(C)||(C=o[3]=new r.Cartesian4),C.x=-i.x,C.y=-i.y,C.z=-i.z,C.w=-r.Cartesian3.dot(r.Cartesian3.negate(i,y),m),C=o[4],n.defined(C)||(C=o[4]=new r.Cartesian4),C.x=t.x,C.y=t.y,C.z=t.z,C.w=-r.Cartesian3.dot(t,c),r.Cartesian3.multiplyByScalar(t,l,m),r.Cartesian3.add(e,m,m),C=o[5],n.defined(C)||(C=o[5]=new r.Cartesian4),C.x=-t.x,C.y=-t.y,C.z=-t.z,C.w=-r.Cartesian3.dot(r.Cartesian3.negate(t,y),m),this._cullingVolume},m.prototype.getPixelDimensions=function(e,t,r,i,o){if(C(this),!n.defined(e)||!n.defined(t))throw new a.DeveloperError("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new a.DeveloperError("drawingBufferWidth must be greater than zero.");if(t<=0)throw new a.DeveloperError("drawingBufferHeight must be greater than zero.");if(!n.defined(r))throw new a.DeveloperError("distance is required.");if(!n.defined(i))throw new a.DeveloperError("pixelRatio is required.");if(i<=0)throw new a.DeveloperError("pixelRatio must be greater than zero.");if(!n.defined(o))throw new a.DeveloperError("A result object is required.");var s=i*(this.right-this.left)/e,f=i*(this.top-this.bottom)/t;return o.x=s,o.y=f,o},m.prototype.clone=function(e){return n.defined(e)||(e=new m),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},m.prototype.equals=function(e){return n.defined(e)&&e instanceof m&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},m.prototype.equalsEpsilon=function(e,t,r){return e===this||n.defined(e)&&e instanceof m&&i.CesiumMath.equalsEpsilon(this.right,e.right,t,r)&&i.CesiumMath.equalsEpsilon(this.left,e.left,t,r)&&i.CesiumMath.equalsEpsilon(this.top,e.top,t,r)&&i.CesiumMath.equalsEpsilon(this.bottom,e.bottom,t,r)&&i.CesiumMath.equalsEpsilon(this.near,e.near,t,r)&&i.CesiumMath.equalsEpsilon(this.far,e.far,t,r)},g.packedLength=4,g.pack=function(e,t,r){return a.Check.typeOf.object("value",e),a.Check.defined("array",t),r=n.defaultValue(r,0),t[r++]=e.width,t[r++]=e.aspectRatio,t[r++]=e.near,t[r]=e.far,t},g.unpack=function(e,t,r){return a.Check.defined("array",e),t=n.defaultValue(t,0),n.defined(r)||(r=new g),r.width=e[t++],r.aspectRatio=e[t++],r.near=e[t++],r.far=e[t],r},Object.defineProperties(g.prototype,{projectionMatrix:{get:function(){return x(this),this._offCenterFrustum.projectionMatrix}}}),g.prototype.computeCullingVolume=function(e,t,r){return x(this),this._offCenterFrustum.computeCullingVolume(e,t,r)},g.prototype.getPixelDimensions=function(e,t,r,a,i){return x(this),this._offCenterFrustum.getPixelDimensions(e,t,r,a,i)},g.prototype.clone=function(e){return n.defined(e)||(e=new g),e.aspectRatio=this.aspectRatio,e.width=this.width,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._width=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},g.prototype.equals=function(e){return!!(n.defined(e)&&e instanceof g)&&(x(this),x(e),this.width===e.width&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},g.prototype.equalsEpsilon=function(e,t,r){return!!(n.defined(e)&&e instanceof g)&&(x(this),x(e),i.CesiumMath.equalsEpsilon(this.width,e.width,t,r)&&i.CesiumMath.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,r)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,r))},Object.defineProperties(b.prototype,{projectionMatrix:{get:function(){return E(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return E(this),this._infinitePerspective}}});var M=new r.Cartesian3,D=new r.Cartesian3,V=new r.Cartesian3,F=new r.Cartesian3;function O(e){e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT),this._offCenterFrustum=new b,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=n.defaultValue(e.near,1),this._near=this.near,this.far=n.defaultValue(e.far,5e8),this._far=this.far,this.xOffset=n.defaultValue(e.xOffset,0),this._xOffset=this.xOffset,this.yOffset=n.defaultValue(e.yOffset,0),this._yOffset=this.yOffset}function z(e){if(!(n.defined(e.fov)&&n.defined(e.aspectRatio)&&n.defined(e.near)&&n.defined(e.far)))throw new a.DeveloperError("fov, aspectRatio, near, or far parameters are not set.");var t=e._offCenterFrustum;if(e.fov!==e._fov||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far||e.xOffset!==e._xOffset||e.yOffset!==e._yOffset){if(e.fov<0||e.fov>=Math.PI)throw new a.DeveloperError("fov must be in the range [0, PI).");if(e.aspectRatio<0)throw new a.DeveloperError("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new a.DeveloperError("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset}}b.prototype.computeCullingVolume=function(e,t,i){if(!n.defined(e))throw new a.DeveloperError("position is required.");if(!n.defined(t))throw new a.DeveloperError("direction is required.");if(!n.defined(i))throw new a.DeveloperError("up is required.");var o=this._cullingVolume.planes,s=this.top,f=this.bottom,u=this.right,d=this.left,h=this.near,l=this.far,p=r.Cartesian3.cross(t,i,M),c=D;r.Cartesian3.multiplyByScalar(t,h,c),r.Cartesian3.add(e,c,c);var m=V;r.Cartesian3.multiplyByScalar(t,l,m),r.Cartesian3.add(e,m,m);var C=F;r.Cartesian3.multiplyByScalar(p,d,C),r.Cartesian3.add(c,C,C),r.Cartesian3.subtract(C,e,C),r.Cartesian3.normalize(C,C),r.Cartesian3.cross(C,i,C),r.Cartesian3.normalize(C,C);var w=o[0];return n.defined(w)||(w=o[0]=new r.Cartesian4),w.x=C.x,w.y=C.y,w.z=C.z,w.w=-r.Cartesian3.dot(C,e),r.Cartesian3.multiplyByScalar(p,u,C),r.Cartesian3.add(c,C,C),r.Cartesian3.subtract(C,e,C),r.Cartesian3.cross(i,C,C),r.Cartesian3.normalize(C,C),w=o[1],n.defined(w)||(w=o[1]=new r.Cartesian4),w.x=C.x,w.y=C.y,w.z=C.z,w.w=-r.Cartesian3.dot(C,e),r.Cartesian3.multiplyByScalar(i,f,C),r.Cartesian3.add(c,C,C),r.Cartesian3.subtract(C,e,C),r.Cartesian3.cross(p,C,C),r.Cartesian3.normalize(C,C),w=o[2],n.defined(w)||(w=o[2]=new r.Cartesian4),w.x=C.x,w.y=C.y,w.z=C.z,w.w=-r.Cartesian3.dot(C,e),r.Cartesian3.multiplyByScalar(i,s,C),r.Cartesian3.add(c,C,C),r.Cartesian3.subtract(C,e,C),r.Cartesian3.cross(C,p,C),r.Cartesian3.normalize(C,C),w=o[3],n.defined(w)||(w=o[3]=new r.Cartesian4),w.x=C.x,w.y=C.y,w.z=C.z,w.w=-r.Cartesian3.dot(C,e),w=o[4],n.defined(w)||(w=o[4]=new r.Cartesian4),w.x=t.x,w.y=t.y,w.z=t.z,w.w=-r.Cartesian3.dot(t,c),r.Cartesian3.negate(t,C),w=o[5],n.defined(w)||(w=o[5]=new r.Cartesian4),w.x=C.x,w.y=C.y,w.z=C.z,w.w=-r.Cartesian3.dot(C,m),this._cullingVolume},b.prototype.getPixelDimensions=function(e,t,r,i,o){if(E(this),!n.defined(e)||!n.defined(t))throw new a.DeveloperError("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new a.DeveloperError("drawingBufferWidth must be greater than zero.");if(t<=0)throw new a.DeveloperError("drawingBufferHeight must be greater than zero.");if(!n.defined(r))throw new a.DeveloperError("distance is required.");if(!n.defined(i))throw new a.DeveloperError("pixelRatio is required");if(i<=0)throw new a.DeveloperError("pixelRatio must be greater than zero.");if(!n.defined(o))throw new a.DeveloperError("A result object is required.");var s=1/this.near,f=this.top*s,u=2*i*r*f/t,d=2*i*r*(f=this.right*s)/e;return o.x=d,o.y=u,o},b.prototype.clone=function(e){return n.defined(e)||(e=new b),e.right=this.right,e.left=this.left,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},b.prototype.equals=function(e){return n.defined(e)&&e instanceof b&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},b.prototype.equalsEpsilon=function(e,t,r){return e===this||n.defined(e)&&e instanceof b&&i.CesiumMath.equalsEpsilon(this.right,e.right,t,r)&&i.CesiumMath.equalsEpsilon(this.left,e.left,t,r)&&i.CesiumMath.equalsEpsilon(this.top,e.top,t,r)&&i.CesiumMath.equalsEpsilon(this.bottom,e.bottom,t,r)&&i.CesiumMath.equalsEpsilon(this.near,e.near,t,r)&&i.CesiumMath.equalsEpsilon(this.far,e.far,t,r)},O.packedLength=6,O.pack=function(e,t,r){return a.Check.typeOf.object("value",e),a.Check.defined("array",t),r=n.defaultValue(r,0),t[r++]=e.fov,t[r++]=e.aspectRatio,t[r++]=e.near,t[r++]=e.far,t[r++]=e.xOffset,t[r]=e.yOffset,t},O.unpack=function(e,t,r){return a.Check.defined("array",e),t=n.defaultValue(t,0),n.defined(r)||(r=new O),r.fov=e[t++],r.aspectRatio=e[t++],r.near=e[t++],r.far=e[t++],r.xOffset=e[t++],r.yOffset=e[t],r},Object.defineProperties(O.prototype,{projectionMatrix:{get:function(){return z(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return z(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return z(this),this._fovy}},sseDenominator:{get:function(){return z(this),this._sseDenominator}}}),O.prototype.computeCullingVolume=function(e,t,r){return z(this),this._offCenterFrustum.computeCullingVolume(e,t,r)},O.prototype.getPixelDimensions=function(e,t,r,a,i){return z(this),this._offCenterFrustum.getPixelDimensions(e,t,r,a,i)},O.prototype.clone=function(e){return n.defined(e)||(e=new O),e.aspectRatio=this.aspectRatio,e.fov=this.fov,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._fov=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},O.prototype.equals=function(e){return!!(n.defined(e)&&e instanceof O)&&(z(this),z(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},O.prototype.equalsEpsilon=function(e,t,r){return!!(n.defined(e)&&e instanceof O)&&(z(this),z(e),i.CesiumMath.equalsEpsilon(this.fov,e.fov,t,r)&&i.CesiumMath.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,r)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,r))};function R(e){a.Check.typeOf.object("options",e),a.Check.typeOf.object("options.frustum",e.frustum),a.Check.typeOf.object("options.origin",e.origin),a.Check.typeOf.object("options.orientation",e.orientation);var i,o,s=e.frustum,f=e.orientation,d=e.origin,h=n.defaultValue(e.vertexFormat,u.VertexFormat.DEFAULT),l=n.defaultValue(e._drawNearPlane,!0);s instanceof O?(i=0,o=O.packedLength):s instanceof g&&(i=1,o=g.packedLength),this._frustumType=i,this._frustum=s.clone(),this._origin=r.Cartesian3.clone(d),this._orientation=t.Quaternion.clone(f),this._drawNearPlane=l,this._vertexFormat=h,this._workerName="createFrustumGeometry",this.packedLength=2+o+r.Cartesian3.packedLength+t.Quaternion.packedLength+u.VertexFormat.packedLength}R.pack=function(e,i,o){a.Check.typeOf.object("value",e),a.Check.defined("array",i),o=n.defaultValue(o,0);var s=e._frustumType,f=e._frustum;return i[o++]=s,0===s?(O.pack(f,i,o),o+=O.packedLength):(g.pack(f,i,o),o+=g.packedLength),r.Cartesian3.pack(e._origin,i,o),o+=r.Cartesian3.packedLength,t.Quaternion.pack(e._orientation,i,o),o+=t.Quaternion.packedLength,u.VertexFormat.pack(e._vertexFormat,i,o),i[o+=u.VertexFormat.packedLength]=e._drawNearPlane?1:0,i};var k=new O,P=new g,q=new t.Quaternion,S=new r.Cartesian3,T=new u.VertexFormat;function A(e,t,r,a,i,o,s,f){for(var u=e/3*2,d=0;d<4;++d)n.defined(t)&&(t[e]=o.x,t[e+1]=o.y,t[e+2]=o.z),n.defined(r)&&(r[e]=s.x,r[e+1]=s.y,r[e+2]=s.z),n.defined(a)&&(a[e]=f.x,a[e+1]=f.y,a[e+2]=f.z),e+=3;i[u]=0,i[u+1]=0,i[u+2]=1,i[u+3]=0,i[u+4]=1,i[u+5]=1,i[u+6]=0,i[u+7]=1}R.unpack=function(e,i,o){a.Check.defined("array",e),i=n.defaultValue(i,0);var s,f=e[i++];0===f?(s=O.unpack(e,i,k),i+=O.packedLength):(s=g.unpack(e,i,P),i+=g.packedLength);var d=r.Cartesian3.unpack(e,i,S);i+=r.Cartesian3.packedLength;var h=t.Quaternion.unpack(e,i,q);i+=t.Quaternion.packedLength;var l=u.VertexFormat.unpack(e,i,T),p=1===e[i+=u.VertexFormat.packedLength];if(!n.defined(o))return new R({frustum:s,origin:d,orientation:h,vertexFormat:l,_drawNearPlane:p});var c=f===o._frustumType?o._frustum:void 0;return o._frustum=s.clone(c),o._frustumType=f,o._origin=r.Cartesian3.clone(d,o._origin),o._orientation=t.Quaternion.clone(h,o._orientation),o._vertexFormat=u.VertexFormat.clone(l,o._vertexFormat),o._drawNearPlane=p,o};var I=new r.Matrix3,B=new r.Matrix4,L=new r.Matrix4,N=new r.Cartesian3,j=new r.Cartesian3,G=new r.Cartesian3,U=new r.Cartesian3,Q=new r.Cartesian3,K=new r.Cartesian3,W=new Array(3),Y=new Array(4);Y[0]=new r.Cartesian4(-1,-1,1,1),Y[1]=new r.Cartesian4(1,-1,1,1),Y[2]=new r.Cartesian4(1,1,1,1),Y[3]=new r.Cartesian4(-1,1,1,1);for(var H=new Array(4),J=0;J<4;++J)H[J]=new r.Cartesian4;R._computeNearFarPlanes=function(e,t,a,i,o,s,f,u){var d=r.Matrix3.fromQuaternion(t,I),h=n.defaultValue(s,N),l=n.defaultValue(f,j),p=n.defaultValue(u,G);h=r.Matrix3.getColumn(d,0,h),l=r.Matrix3.getColumn(d,1,l),p=r.Matrix3.getColumn(d,2,p),r.Cartesian3.normalize(h,h),r.Cartesian3.normalize(l,l),r.Cartesian3.normalize(p,p),r.Cartesian3.negate(h,h);var c,m,C=r.Matrix4.computeView(e,p,l,h,B);if(0===a){var w=i.projectionMatrix,v=r.Matrix4.multiply(w,C,L);m=r.Matrix4.inverse(v,L)}else c=r.Matrix4.inverseTransformation(C,L);n.defined(m)?(W[0]=i.near,W[1]=i.far):(W[0]=0,W[1]=i.near,W[2]=i.far);for(var _=0;_<2;++_)for(var y=0;y<4;++y){var g=r.Cartesian4.clone(Y[y],H[y]);if(n.defined(m)){var x=1/(g=r.Matrix4.multiplyByVector(m,g,g)).w;r.Cartesian3.multiplyByScalar(g,x,g),r.Cartesian3.subtract(g,e,g),r.Cartesian3.normalize(g,g);var b=r.Cartesian3.dot(p,g);r.Cartesian3.multiplyByScalar(g,W[_]/b,g),r.Cartesian3.add(g,e,g)}else{n.defined(i._offCenterFrustum)&&(i=i._offCenterFrustum);var E=W[_],M=W[_+1];g.x=.5*(g.x*(i.right-i.left)+i.left+i.right),g.y=.5*(g.y*(i.top-i.bottom)+i.bottom+i.top),g.z=.5*(g.z*(E-M)-E-M),g.w=1,r.Matrix4.multiplyByVector(c,g,g)}o[12*_+3*y]=g.x,o[12*_+3*y+1]=g.y,o[12*_+3*y+2]=g.z}},R.createGeometry=function(e){var a=e._frustumType,f=e._frustum,u=e._origin,d=e._orientation,h=e._drawNearPlane,l=e._vertexFormat,p=h?6:5,c=new Float64Array(72);R._computeNearFarPlanes(u,d,a,f,c);var m=24;c[m]=c[12],c[m+1]=c[13],c[m+2]=c[14],c[m+3]=c[0],c[m+4]=c[1],c[m+5]=c[2],c[m+6]=c[9],c[m+7]=c[10],c[m+8]=c[11],c[m+9]=c[21],c[m+10]=c[22],c[m+11]=c[23],c[m+=12]=c[15],c[m+1]=c[16],c[m+2]=c[17],c[m+3]=c[3],c[m+4]=c[4],c[m+5]=c[5],c[m+6]=c[0],c[m+7]=c[1],c[m+8]=c[2],c[m+9]=c[12],c[m+10]=c[13],c[m+11]=c[14],c[m+=12]=c[3],c[m+1]=c[4],c[m+2]=c[5],c[m+3]=c[15],c[m+4]=c[16],c[m+5]=c[17],c[m+6]=c[18],c[m+7]=c[19],c[m+8]=c[20],c[m+9]=c[6],c[m+10]=c[7],c[m+11]=c[8],c[m+=12]=c[6],c[m+1]=c[7],c[m+2]=c[8],c[m+3]=c[18],c[m+4]=c[19],c[m+5]=c[20],c[m+6]=c[21],c[m+7]=c[22],c[m+8]=c[23],c[m+9]=c[9],c[m+10]=c[10],c[m+11]=c[11],h||(c=c.subarray(12));var C=new s.GeometryAttributes({position:new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:c})});if(n.defined(l.normal)||n.defined(l.tangent)||n.defined(l.bitangent)||n.defined(l.st)){var w=n.defined(l.normal)?new Float32Array(12*p):void 0,v=n.defined(l.tangent)?new Float32Array(12*p):void 0,_=n.defined(l.bitangent)?new Float32Array(12*p):void 0,y=n.defined(l.st)?new Float32Array(8*p):void 0,g=N,x=j,b=G,E=r.Cartesian3.negate(g,U),M=r.Cartesian3.negate(x,Q),D=r.Cartesian3.negate(b,K);m=0,h&&(A(m,w,v,_,y,D,g,x),m+=12),A(m,w,v,_,y,b,E,x),A(m+=12,w,v,_,y,E,D,x),A(m+=12,w,v,_,y,M,D,E),A(m+=12,w,v,_,y,g,b,x),A(m+=12,w,v,_,y,x,b,E),n.defined(w)&&(C.normal=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:w})),n.defined(v)&&(C.tangent=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:v})),n.defined(_)&&(C.bitangent=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:_})),n.defined(y)&&(C.st=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:y}))}for(var V=new Uint16Array(6*p),F=0;F<p;++F){var O=6*F,z=4*F;V[O]=z,V[O+1]=z+1,V[O+2]=z+2,V[O+3]=z,V[O+4]=z+2,V[O+5]=z+3}return new o.Geometry({attributes:C,indices:V,primitiveType:o.PrimitiveType.TRIANGLES,boundingSphere:t.BoundingSphere.fromVertices(c)})},e.FrustumGeometry=R,e.OrthographicFrustum=g,e.PerspectiveFrustum=O}));
//# sourceMappingURL=FrustumGeometry-95793a9f.js.map
